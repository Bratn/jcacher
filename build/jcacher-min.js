(function(){function b(a){return new wrapper(a)}if("undefined"!==typeof exports){if("undefined"!==typeof module&&module.k)exports=module.k=b;exports.q=b}else"function"===typeof define&&define.o?define("jcacher",function(){return b}):this.jCacher=b;var f=[];b.VERSION="2.0";b.count=0;b.c={EXPIRED:"expired",REMOVED:"removed",DEPENDENCY_CHANGED:"dependencyChanged"};b.add=function(a,d,e,c){d=d instanceof b.CacheItem?d:new b.CacheItem(a,d,e);b.count+=f[a]?0:1;f[a]=d;if(c){a=0;for(e=c.length;a<e;a++){var g=
f[c[a]];if(!g){b.remove(d,b.c.i);break}g.g.push(d.key)}}};b.get=function(a){a=f[a];return!a?null:a.l()};b.remove=function(a,d,e){a=a instanceof b.CacheItem?a:f[a];if("undefined"==a)return!1;delete f[a.key];b.count--;if(this.d)for(var c=0,g=this.p.length;c<g;c++)this.d[c].apply(b,a,d||b.c.n,e);c=0;for(g=a.g.length;c<g;c++)b.remove(a.g[c],b.c.i);return!0};b.reset=function(){for(var a in f)b.remove(a)};b.removed=function(a){(this.d||(this.d=[])).push(a)};b.CacheItem=function(a,d,e){var c=b.CacheItem.defaults;
if("Object"==typeof e)c.a="undefined"!=e.a?e.a:c.a,c.b="undefined"!=e.b?e.b:c.b,c.removed=e.removed?e.removed:c.removed;this.key=a;this.g=[];this.e=c;this.j=d;this.f=null;this.h()};b.CacheItem.defaults={a:60,b:60,removed:b.removed};b.CacheItem.prototype={l:function(){this.e.a&&this.h();return this.j},h:function(){var a=this;a.f&&clearTimeout(a.f);var d=a.e.a||a.e.b||null;if(null!==d)a.f=setTimeout(function(){b.remove(a,b.c.m)},1E3*d)}}}).call(this);
