(function(){function b(a){return new wrapper(a)}if(void 0!==typeof exports){if(void 0!==typeof module&&module.i)exports=module.i=b;exports.m=b}else"function"===typeof define&&define.k?define("jcacher",function(){return b}):this.jCacher=b;var f=[];b.VERSION="2.0";b.add=function(a,d,e,c){a=f[a]=d instanceof b.CacheItem?d:new b.CacheItem(a,d,e);if(c){d=0;for(e=c.length;d<e;d++){var g=f[c[d]];if(!g){b.remove(a,"dependencyChanged");break}g.f.push(a.key)}}};b.get=function(a){a=f[a];return!a?null:a.j()};
b.remove=function(a,d,e){a=a instanceof b.CacheItem?a:f[a];if(void 0===a)return!1;delete f[a.key];if(this.c)for(var c=0,g=this.l.length;c<g;c++)this.c[c].apply(b,a,d||"removed",e);c=0;for(g=a.f.length;c<g;c++)b.remove(a.f[c],"dependencyChanged");return!0};b.reset=function(){for(var a in f)b.remove(a)};b.removed=function(a){(this.c||(this.c=[])).push(a)};b.CacheItem=function(a,d,e){var c=b.CacheItem.defaults;if("Object"==typeof e)c.a=void 0!==e.a?e.a:c.a,c.b=void 0!==e.b?e.b:c.b,c.removed=e.removed?
e.removed:c.removed;this.key=a;this.f=[];this.d=c;this.h=d;this.e=null;this.g()};b.CacheItem.defaults={sliding:60,absolute:60,removed:b.removed};b.CacheItem.prototype={j:function(){this.d.a&&this.g();return this.h},g:function(){var a=this;a.e&&clearTimeout(a.e);var d=a.d.a||a.d.b||null;if(null!==d)a.e=setTimeout(function(){b.remove(a,"expired")},1E3*d)}}}).call(this);
